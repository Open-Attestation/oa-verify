language: node_js
node_js:
  - 8.11.3
cache: npm install
jobs:
  include:
    - stage: test
      script: 
        - npm run lint
        - npm run test
    - stage: publish
        - if [ "${TRAVIS_BRANCH}" = "master" ] && ! [ `printf -- "${TRAVIS_COMMIT_MESSAGE}" | grep "Publish"` ]; then
            ./build/publish.sh;
          fi;
stages:
  - test
  - publish